// Generated by CoffeeScript 1.4.0
(function() {
  var ChatPacket;

  ChatPacket = (function() {

    ChatPacket.prototype.id = [3, 47, 71];

    function ChatPacket(data) {
      this.data(data);
      this.type = this.int(this.data());
      switch (this.type) {
        case 0:
          this.id = 71;
          this.cid = this.long(this.data());
          break;
        case 3:
          this.id = 3;
      }
      this.message = this.string(this.data());
    }

    ChatPacket.prototype.data = function() {
      if (arguments.length === 0) {
        return this.bytes;
      }
      return this.bytes = arguments[0];
    };

    ChatPacket.prototype.int = function(data) {
      var integer;
      integer = data[0];
      this.data(data.subarray(1));
      return integer;
    };

    ChatPacket.prototype.long = function(data) {
      var byte, long, _i, _len, _ref;
      long = 0;
      _ref = data.subarray(0, 4);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        byte = _ref[_i];
        long |= byte << (8 * _i);
      }
      this.data(data.subarray(4));
      console.log(long);
      return long;
    };

    ChatPacket.prototype.string = function(data) {
      var byte, chars, _i, _len;
      chars = [];
      for (_i = 0, _len = data.length; _i < _len; _i++) {
        byte = data[_i];
        if (byte === 0x00) {
          break;
        }
        chars[_i] = String.fromCharCode(byte);
      }
      this.data(data.subarray(++chars.length));
      return chars.join("");
    };

    return ChatPacket;

  })();

  chrome.app.Routes[3] = chrome.app.Routes[47] = chrome.app.Routes[71] = ChatPacket;

  PacketId.GlobalChat = 3;

  PacketId.WhisperChat = 47;

  PacketId.Chat = 71;

}).call(this);
